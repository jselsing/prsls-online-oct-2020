{"AWSTemplateFormatVersion":"2010-09-09","Description":"The AWS CloudFormation template for this Serverless application","Resources":{"ServerlessDeploymentBucket":{"Type":"AWS::S3::Bucket","Properties":{"BucketEncryption":{"ServerSideEncryptionConfiguration":[{"ServerSideEncryptionByDefault":{"SSEAlgorithm":"AES256"}}]}}},"ServerlessDeploymentBucketPolicy":{"Type":"AWS::S3::BucketPolicy","Properties":{"Bucket":{"Ref":"ServerlessDeploymentBucket"},"PolicyDocument":{"Statement":[{"Action":"s3:*","Effect":"Deny","Principal":"*","Resource":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":s3:::",{"Ref":"ServerlessDeploymentBucket"},"/*"]]}],"Condition":{"Bool":{"aws:SecureTransport":false}}}]}}},"HelloLogGroup":{"Type":"AWS::Logs::LogGroup","Properties":{"LogGroupName":"/aws/lambda/jzts-test-func-dev-hello"}},"IamRoleLambdaExecution":{"Type":"AWS::IAM::Role","Properties":{"AssumeRolePolicyDocument":{"Version":"2012-10-17","Statement":[{"Effect":"Allow","Principal":{"Service":["lambda.amazonaws.com"]},"Action":["sts:AssumeRole"]}]},"Policies":[{"PolicyName":{"Fn::Join":["-",["jzts-test-func","dev","lambda"]]},"PolicyDocument":{"Version":"2012-10-17","Statement":[{"Effect":"Allow","Action":["logs:CreateLogStream","logs:CreateLogGroup"],"Resource":[{"Fn::Sub":"arn:${AWS::Partition}:logs:${AWS::Region}:${AWS::AccountId}:log-group:/aws/lambda/jzts-test-func-dev*:*"}]},{"Effect":"Allow","Action":["logs:PutLogEvents"],"Resource":[{"Fn::Sub":"arn:${AWS::Partition}:logs:${AWS::Region}:${AWS::AccountId}:log-group:/aws/lambda/jzts-test-func-dev*:*:*"}]}]}}],"Path":"/","RoleName":{"Fn::Join":["-",["jzts-test-func","dev",{"Ref":"AWS::Region"},"lambdaRole"]]}}},"HelloLambdaFunction":{"Type":"AWS::Lambda::Function","Properties":{"Code":{"S3Bucket":{"Ref":"ServerlessDeploymentBucket"},"S3Key":"serverless/jzts-test-func/dev/1602144609942-2020-10-08T08:10:09.942Z/jzts-test-func.zip"},"FunctionName":"jzts-test-func-dev-hello","Handler":"handler.hello","MemorySize":1024,"Role":{"Fn::GetAtt":["IamRoleLambdaExecution","Arn"]},"Runtime":"nodejs12.x","Timeout":6},"DependsOn":["HelloLogGroup"]},"HelloLambdaVersiontZ8v4vMqs2e0t3f7gBGi6lj188SU0HY2LzuuZQpkkRU":{"Type":"AWS::Lambda::Version","DeletionPolicy":"Retain","Properties":{"FunctionName":{"Ref":"HelloLambdaFunction"},"CodeSha256":"S69qqXtGh9QcAOm8DsTtiSjMomI9ZG6VOclMjgFhVlU="}},"ApiGatewayRestApi":{"Type":"AWS::ApiGateway::RestApi","Properties":{"Name":"dev-jzts-test-func","EndpointConfiguration":{"Types":["EDGE"]},"Policy":""}},"ApiGatewayMethodGet":{"Type":"AWS::ApiGateway::Method","Properties":{"HttpMethod":"GET","RequestParameters":{},"ResourceId":{"Fn::GetAtt":["ApiGatewayRestApi","RootResourceId"]},"RestApiId":{"Ref":"ApiGatewayRestApi"},"ApiKeyRequired":false,"AuthorizationType":"NONE","Integration":{"IntegrationHttpMethod":"POST","Type":"AWS_PROXY","Uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:",{"Ref":"AWS::Region"},":lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["HelloLambdaFunction","Arn"]},"/invocations"]]}},"MethodResponses":[]}},"ApiGatewayDeployment1602144604637":{"Type":"AWS::ApiGateway::Deployment","Properties":{"RestApiId":{"Ref":"ApiGatewayRestApi"},"StageName":"dev"},"DependsOn":["ApiGatewayMethodGet"]},"HelloLambdaPermissionApiGateway":{"Type":"AWS::Lambda::Permission","Properties":{"FunctionName":{"Fn::GetAtt":["HelloLambdaFunction","Arn"]},"Action":"lambda:InvokeFunction","Principal":"apigateway.amazonaws.com","SourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":",{"Ref":"ApiGatewayRestApi"},"/*/*"]]}}}},"Outputs":{"ServerlessDeploymentBucketName":{"Value":{"Ref":"ServerlessDeploymentBucket"}},"HelloLambdaFunctionQualifiedArn":{"Description":"Current Lambda function version","Value":{"Ref":"HelloLambdaVersiontZ8v4vMqs2e0t3f7gBGi6lj188SU0HY2LzuuZQpkkRU"}},"ServiceEndpoint":{"Description":"URL of the service endpoint","Value":{"Fn::Join":["",["https://",{"Ref":"ApiGatewayRestApi"},".execute-api.",{"Ref":"AWS::Region"},".",{"Ref":"AWS::URLSuffix"},"/dev"]]}}}}
